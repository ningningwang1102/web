"use strict";$define(["cmsAjax"],function(s){return{init:function(){var n=this._params,i=this.scope;n.propJson,n.id,n.cid;"business"==n.propJson.type?s.cmsAjax.get(location.origin+"/fwebapi/cms/baseConfig/get").then(function(s){var t;200==s.status&&200==s.data.status&&(null==(s=s.data.data).businessImgUrl||""==s.businessImgUrl?isFrontEnv()&&$(i).hide():(s=__ce.imgStaticUrl[0]+"/"+s.businessImgUrl,n.propJson.watermark?((t=new Image).src=s,t.setAttribute("crossOrigin","Anonymous"),t.onload=function(){!function(s,t){t.find(".businessCanvas").remove(),t.append('<canvas class="businessCanvas" style="display:none"/>');var n=t.find(".businessCanvas")[0],i=s.width,e=s.height;n.width=i,n.height=e;i=n.getContext("2d");i.drawImage(s,0,0);e=document.createElement("canvas");e.width=350,e.height=120;s=e.getContext("2d");s.textAlign="left",s.textBaseline="top",s.font="14px Microsoft Yahei",s.fillStyle="rgba(0,0,0,.5)",s.rotate(-20*Math.PI/180),s.fillText("此证件仅限在官网亮证使用，复印或下载无效",0,110),i.fillStyle=i.createPattern(e,"repeat"),i.fillRect(0,0,n.width,n.height);n=n.toDataURL("image/jpeg",.8);t.find(".p_businesscontent").append('<img class="p_businessimg" src="" alt="" la="la"/>'),t.find(".p_businessimg").attr("src",n);n=t.find(".js-business").text();t.find(".p_businessimg").attr("alt",n)}(t,i)}):(i.find(".p_businesscontent").append('<img class="p_businessimg" src="" alt="" la="la"/>'),i.find(".p_businessimg").attr("src",s),s=i.find(".js-business").text(),i.find(".p_businessimg").attr("alt",s)),i.find(".js-business").on("click",function(){$("body").children(".p_businesspopup").remove(),$(".p_businesspopup").show(),$("body").append(i.find(".p_businesspopup").prop("outerHTML")),$(".p_businessclose").on("click",function(){$(".p_businesspopup").hide()}),$(".p_businessbg").on("click",function(){$(".p_businesspopup").hide()})})))}):(isFrontEnv()||i.text("请进入后台编辑版权信息"),s.cmsAjax.get(location.origin+"/fwebapi/cms/baseConfig/get").then(function(s){200==s.status&&200==s.data.status&&(null==(s=s.data.data).copyrightInfo_symbol||""==s.copyrightInfo_symbol?i.text("请进入后台编辑版权信息"):i.text(s.copyrightInfo_symbol))}))}}});