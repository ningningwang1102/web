"use strict";$define(["swiper"],function(e){return{init:function(e,n){var d=e||this._params;d.id,d.cid;(n=n||this.scope).parents(".p_item").css({overflow:"hidden"});var t,p=!1;function i(){var e=d.id,o=d.propJson.settings,t={direction:"vertical"==o.direction?"vertical":"horizontal",slidesPerView:1,spaceBetween:0,effect:o.effect||"",speed:o.speed||600,loop:!0,pagination:!!o.pagination&&{el:"."+e+" .swiper-pagination",clickable:!0},navigation:{nextEl:"."+e+" .swiper-button-next",prevEl:"."+e+" .swiper-button-prev"},autoplay:!!o.autoplay&&{delay:1e3*Number(o.deplay)||3e3,stopOnLastSlide:!1,disableOnInteraction:!0},on:{init:function(){p=!0},slideChangeTransitionEnd:function(e){$(this.slides[this.activeIndex]).siblings().find(".p_info").removeClass("anim"),$(this.slides[this.activeIndex]).find(".p_info").addClass("anim");var t=$(this.slides[this.activeIndex]).find(".videoContent video");t.length?function(e,t){var i=e.get(0),n=e.parent().parent().next(".p_video_button");o.videoAutoplay&&s(i,n,t);i.onended=function(){o.videoLoop?s(i,n,t):(n.show(),o.autoplay&&!1!==o.palyWithVideo&&(t.autoplay.start(),t.slideNext()))},n.click(function(){s(i,n,t),i.muted=!1}),e.click(function(){a(i,n,t),i.muted=!1})}(t,e):o.autoplay&&e.autoplay.start()},slideChangeTransitionStart:function(t){this.slides.forEach(function(e){e=$(e).find(".videoContent video");e.length&&a(e.get(0),e.parent().parent().next(".p_video_button"),t)})}}},i=new Swiper("."+e+" .swiper-container",t);function a(e,t,i){e.pause(),t.fadeIn(),n.find(".p_videoPoster").fadeIn(),o.autoplay&&i.autoplay.start()}function s(e,t,i){e.play(),e.onplay=function(){t.fadeOut()},n.find(".p_videoPoster").fadeOut(),o.autoplay&&!1!==o.palyWithVideo&&i.autoplay.stop()}i.el&&(i.el.onmouseover=function(){o.autoplay&&o.overStop&&i.autoplay.stop()},i.el.onmouseleave=function(){!function(){if(!o.autoplay||!isFrontEnv())return;var e=i.slides[i.activeIndex],e=$(e).find("video");!1!==o.palyWithVideo&&0<e.length?0<(e=e[0]).currentTime&&!e.paused&&!e.ended?i.autoplay.stop():(i.autoplay.start(),e.ended&&i.slideNext()):i.autoplay.start()}()}),n.find('.swiper-slide[data-swiper-slide-index="0"]').eq(0).find(".videoContent video").length&&o.videoAutoplay&&i.autoplay.stop()}!(0<n.parents('[id^="c_magiccube_009-"]').length||0<n.parents('[id^="c_popbox-"]').length)||(t=n.parents(".p_content")).is(":visible")?i():t.on("onVisible",function(){p||i()})}}});