"use strict";$define(["hammer"],function(){$.extend({lightbox:function(n){var a,t=$.extend({images:[],activeIndex:0,callback:function(){}},n),e="lightbox"+ +new Date;$("body").append((a=[],t.images.forEach(function(n){a.push('<div class="l_imgSlide"><img src="'.concat(n.url,'" class="pic"></div>'))}),'\n                    <div class="lightbox" id="'.concat(e,'">\n                        <div class="picview">\n                            ').concat(a.join(""),'\n                        </div>\n                        <div class="btnview">\n                            <a href="javascript:;" class="opbtn btnprev">←</a>\n                            <a href="javascript:;" class="opbtn btnnext">→</a>\n                            <a href="javascript:;" class="opbtn btnclose">×</a>\n                        </div>\n                        <div class="pageview"><span class="activeIndex">').concat(t.activeIndex+1,"</span> / ").concat(t.images.length,"</div>\n                    </div>\n                ")));function i(n){n<0&&(t.activeIndex=t.images.length-1,n=t.images.length-1),n>=t.images.length&&(t.activeIndex=0,n=0),t.images[n].url,o.fadeOut(300),setTimeout(function(){l.html(n+1),o.eq(n).fadeIn(300),c.find(".pic").css({transform:""}),function(n){var e=n.width(),i=n.height(),t=n.find("img"),c=t.width(),s=t.height(),n=new Hammer(n[0]),d=1;n.get("pinch").set({enable:!0}),n.on("pinch",function(n){var a=Number(t.attr("data-scale")||1);d=Math.min(Math.max(1,a*n.scale),4),t.attr("data-scale",d),f()}),n.get("pan").set({direction:Hammer.DIRECTION_ALL});var o=0,l=0,v=0,r=0;function f(){t.css({transform:"scale("+d+") translate("+v+"px, "+r+"px)"})}n.on("panstart",function(n){o=v,l=r}),n.on("pan",function(n){var a,t=o+n.deltaX,n=l+n.deltaY;v=e<c*d?(a=(c*d-e)/2,Math.min(Math.max(-a,t),a)):0,r=i<s*d?(a=(s*d-i)/2,Math.min(Math.max(-a,n),a)):0,f()})}(o.eq(n))},300)}var c=$("#"+e),s=c.find(".btnclose"),d=c.find(".btnnext"),n=c.find(".btnprev"),o=c.find(".pic").parent(),l=c.find(".activeIndex");i(t.activeIndex),s.click(function(){c.remove()}),d.click(function(){t.activeIndex++,i(t.activeIndex)}),n.click(function(){t.activeIndex--,i(t.activeIndex)})}})});