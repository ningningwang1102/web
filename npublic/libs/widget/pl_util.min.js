"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}$.openNewWindow=function(e){var t=$("<a target='_blank'></a>").attr("href",e)[0];"function"!=typeof t.click||/^Mozilla.*Firefox.*/.test(navigator.userAgent)?window.open(e):t.click()},$.openHref=function(e){window.location.href=e},$.fn.getScope=function(){return $(this).closest("[id^='c_']")},$.fn.onErrorImg=function(){$("img").off("error").on("error",function(){var e=$(this),t=e.attr("src"),r="/npublic/img/no-img.svg";t!=r&&e.attr("src",r).attr("errorsrc",t)})},$.formatDate=function(e,t){if("Invalid Date"==e)return"";var r,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},$.changeUrlArg=function(url,arg,val){var handle=function handle(url,arg,val){var pattern="[?|&]"+arg+"=([^&]*)",replaceText=arg+"="+val,nUrl=url,nUrl=url.match(pattern)?url.replace(eval("/[?]("+arg+"=)([^&]*)/gi"),"?"+replaceText).replace(eval("/[&]("+arg+"=)([^&]*)/gi"),"&"+replaceText):url+(url.match("[?]")?"&":"?")+replaceText;return nUrl};if("string"==typeof arg)return handle(url,arg,val);if("object"==_typeof(arg)){var tmpUrl=url,i;for(i in arg)tmpUrl=handle(tmpUrl,i,arg[i]);return tmpUrl}},$.delUrlArg=function(url,arg){var handle=function handle(url,arg){var pattern="[?|&]"+arg+"([^=]*)",nUrl=url;return url.match(pattern)&&(nUrl=url.replace(eval("/[?]("+arg+"=)([^&]*)/gi"),"?").replace(eval("/[&]("+arg+"=)([^&]*)/gi"),"")),nUrl=nUrl.replace("?&","?"),"?"==nUrl.substr(-1)&&(nUrl=nUrl.substr(0,nUrl.length-1)),nUrl};if("string"==typeof arg)return handle(url,arg);if("object"==_typeof(arg)){var tmpUrl=url;return arg.forEach(function(e){tmpUrl=handle(tmpUrl,e)}),tmpUrl}},$.handleDataImg=function(e){function t(e){var t=__ce.imgStaticUrl;return 3==e?"/repository/":2==e?(null==__ce.imgStaticCount&&(__ce.imgStaticCount=0),e=__ce.imgStaticCount%t.length,__ce.imgStaticCount++,t[e]||t[0]):t[0]}function r(e,t){return""==t||a.test(e)&&(e=e.replace(a,function(e){return e.startsWith("/")||(e="/"+e),t+e})),e}var n,i,a=/^(?!http(s)?:\/\/)(.*?)\/(.*?\.(png|jpg|gif|jpeg|webp|bmp|tiff|PNG|JPG|GIF|JPEG|WEBP|BMP|TIFF))$/;if("string"==typeof e)!a.test(e)||""!=(n=t(tenant.cdnFlag,tenant.unittype))&&(e=r(e,n));else for(var o in e)!a.test(e[o])||""!=(i=t(tenant.cdnFlag,tenant.unittype))&&(e[o]=r(e[o],i));return e},$.handleDataVideo=function(t){function e(e){return 3==e?"/repository/":(e=__ce.videoStaticUrl,-1<t.indexOf("/encryption/")&&(e=__ce.encryptionFile),e[0])}var r,n,i=/^(?!http(s)?:\/\/)(.*?)\/(.*?\.(mp4))$/;return i.test(t)&&""!=e(tenant.cdnFlag)&&(r=t,""==(n=e(tenant.cdnFlag))||i.test(r)&&(r=r.replace(i,function(e){return e.startsWith("/")||(e="/"+e),n+e})),t=r),t},$.handleDataFile=function(t){function e(e){return 3==e?"/repository/":(e=__ce.fileStaticUrl,-1<t.indexOf("/encryption/")&&(e=__ce.encryptionFile),e[0])}var r,n,i=/^(?!http(s)?:\/\/)/;return i.test(t)&&""!=e(tenant.cdnFlag)&&(r=t,""==(n=e(tenant.cdnFlag))||i.test(r)&&r&&(r=r.replace(i,function(e){return e.startsWith("/")||(e="/"+e),n+e})),t=r),t},$.formValidate=function(e,t,r,n){var i,a,o;if("resetForm"!=e)if("errorMessage"!=e)for(var l in r.required.value=!(!t.attr("required")||!r.required),r){var c=r[l];if(""==e){var s=!("required"!=l||!c.value)&&c.msg;if(u(t,s),!1!==s)return}else if("type"==l&&c.state){s=(i=e,a=c.value,o=void 0,!(!(o={text:/[\w\W]*/,mobile:/^[0-9]{11}$/,countryMobile:/^[0-9\+-]+$/,tel:/^[0-9\+-]+$/,countryTel:/^[0-9\+-]+$/,number:/^-?[0-9]+(\.[0-9]*)?$/,email:/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,5}$/,card:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,url:/^(?:http(s)?:\/\/)[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/})[a]||o[a].test(i))&&c.msg);if(u(t,s),!1!==s)return}else{if("decimal"==l&&c.state&&-1<e.indexOf(".")&&e.split(".")[1].length>c.value)return c.msg=c.msg.replace("%len",c.value),void u(t,c.msg);if("minLength"==l&&c.state&&e.length<c.value)return c.msg=c.msg.replace("%len",c.value),void u(t,c.msg);if("maxLength"==l&&c.state&&e.length>c.value)return c.msg=c.msg.replace("%len",c.value),void u(t,c.msg);if("min"==l&&c.state&&Number(e)<Number(c.value))return c.msg=c.msg.replace("%len",c.value),void u(t,c.msg);if("max"==l&&c.state&&Number(e)>Number(c.value))return c.msg=c.msg.replace("%len",c.value),void u(t,c.msg);if("custom"==l&&c.state&&!new RegExp(c.value).test(e))return void u(t,c.msg);if("sensitive"==l&&c.state)return void function(t,r){$require(["cmsAjax"],function(e){e.cmsAjax.postJson("/fwebapi/cms/sensitive/findContentContainWords",{content:t,type:3}).then(function(e){e.data&&e.data.smsSensitiveWords&&0<e.data.smsSensitiveWords.length&&r(e.data.smsSensitiveWords)})})}(e,function(e){u(t,window.i18n.form_mgc+":"+e.join(","))});u(t,!1)}}else u(t,r);else u(t,!1);function u(e,t){var r=e.find(".invalid-feedback"),e=e.find(".p_input");n&&(r=(e=n).parent().find(".invalid-feedback")),!1===t?(e.removeClass("is-invalid"),r.text("")):(e.addClass("is-invalid"),r.text(t))}},$.uuid=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},$.getSearch=function(){var e=new Object,t=decodeURIComponent(location.href).match(/c-.*?\.html/);if(t)for(var r=t[0].substr(2),n=(r=r.substring(0,r.length-5)).split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);r=decodeURI(location.search);if(-1!=r.indexOf("?"))for(var a=r.substr(1).split("&"),o=0;o<a.length;o++)e[a[o].split("=")[0]]=unescape(a[o].split("=")[1]);return e},$.getTerminal=function(){return Boolean(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))||$(window).width()<=768?4:3},$.isWechat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},$.showWxPrompt=function(){$("body").append('<div class="openwithbrowser">\n        <div class="wxarrow"><img src="npublic/img/arrow.png" /></div>\n        <p>由于微信浏览器限制，请按照一下步骤操作：</p>\n        <p>1、点击右上角...</p>\n        <p>2、选择在浏览器中打开</p>\n        <div class="wxprom"><img src="npublic/img/wxdot.png" /></div>\n    </div>'),$(".openwithbrowser").off("click").on("click",function(){$(".openwithbrowser").remove()})},$.getProp=function(e,t){var r=(r=$("#"+e).children("input:hidden[name='propJson']").val())?JSON.parse(r):{},n={},i=t.split("-")[1];if(i)for(var a in r)a.endsWith("_"+i)&&(n[a.split("_")[0]]=r[a]);else n=r;return n},$.debounce=function(i){var a,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];clearTimeout(a),a=setTimeout(function(){i.apply(e,r)},o)}},$.getSpace=function(r,n){$require(["cmsAjax"],function(e){var t="/fwebapi/visitor/lowcode/resource/getCapacity?resourceType="+r;e.cmsAjax.get(t).then(function(e){e.data&&e.data.capacity?n(Number(e.data.capacity)):n("capacity")}).catch(function(e){n("capacity")})})},$.encodeHtml=function(e){(t=document.createElement("div")).innerHTML=e;var e=t.innerText||t.textContent,t=null;return e},$.arraySort=function(e,r,t){var n=/^([+]\d+[.]\d+|[-]\d+[.]\d+|\d+[.]\d+|[+]\d+|[-]\d+|\d+)$/;return"desc"==t?e.sort(function(e,t){return n.test(e[r])?t[r]-e[r]:t[r].localeCompare(e[r])}):e.sort(function(e,t){return n.test(e[r])?e[r]-t[r]:e[r].localeCompare(t[r])})};