"use strict";var needPolyfill=isIE()?"polyfill":"";$define([needPolyfill],function(){var i=/(http|https):\/\/([\w.]+\/?)\S*/;return{cmsAjax:{postJson:function(e,t,a){var s={type:"POST",dataType:"JSON",headers:{instance:tenant.bossProductInstance,"content-type":"application/json;charset=utf-8"}},n={};-1<e.indexOf("?")&&e.split("?")[1].split("&").forEach(function(e){e=e.split("=");n[e[0]]=e[1]});var c=Object.assign({},n,t||{}),r=Object.assign({},s,a||{});return r.headers=Object.assign({},s.headers,a&&a.headers||{}),i.test(e)||(e="postfile"==r.act?__ce.baseURL+__ce.filePath+e:__ce.baseURL+__ce.cmsAjaxUrl+e),new Promise(function(t,a){$.ajax({url:e,type:r.type,dataType:r.dataType,data:JSON.stringify(c),headers:r.headers,success:function(e){t(e)},error:function(e){a(e)}})})},get:function(e,s,n){return i.test(e)||(e=__ce.baseURL+__ce.testAjaxUrl+e),new Promise(function(t,a){$.ajax({url:e,type:n&&n.type||"GET",dataType:n&&n.dataType||"JSON",data:s,headers:n&&n.headers||{},success:function(e){t(e)},error:function(e){a(e)}})})}},doFile:function(s,n,c){return i.test(s)||(s=__ce.baseURL+__ce.filePath+s),new Promise(function(t,a){var e={url:s,type:c&&c.type||"GET",dataType:c&&c.dataType||"JSON",data:n,headers:c&&c.headers||{},success:function(e){t(e)},error:function(e){a(e)}};c&&!1===c.processData&&(e.processData=c.processData),c&&!1===c.contentType&&(e.contentType=c.contentType),$.ajax(e)})}}});