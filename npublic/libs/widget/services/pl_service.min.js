"use strict";
$define(["pl_util"], function () {
  $.extend({
    pl_service: function pl_service(options) {
      var obj = $.extend({ data: {} }, options),
        isForeign = !(
          !tenant.ningkerDomain ||
          "FOREIGN_TRADE" != tenant.ningkerDomain ||
          "zh_CN" == tenant.language
        ),
        getKey = function (c, n, a) {
          n = n || "";
          var e = {};
          switch (c) {
            case 1:
              (e.key = "qq"),
                (e.name = "QQ"),
                (e.title = "QQ"),
                (e.url = "tencent://message/?uin=".concat(n));
              break;
            case 2:
              (e.key = "alww"),
                (e.name = i18n.service_alww),
                (e.title = i18n.service_alww),
                (e.url = "http://amos.alicdn.com/getcid.aw?v=2&uid=".concat(
                  n,
                  "&site=cntaobao&s=2&groupid=0&charset=utf-8"
                ));
              break;
            case 3:
              (e.key = "alww"),
                (e.name = i18n.service_alwwe),
                (e.title = i18n.service_alwwe),
                (e.url = "http://amos.alicdn.com/getcid.aw?v=2&uid=".concat(
                  n,
                  "&site=cntaobao&s=1&groupid=0&charset=utf-8"
                ));
              break;
            case 4:
              (e.key = "skype"),
                (e.name = "Skype"),
                (e.title = "Skype"),
                (e.url = "skype:".concat(n, "?chat"));
              break;
            case 5:
              (e.key = "whatsapp"),
                (e.name = "WhatsApp"),
                (e.title = "WhatsApp"),
                (e.url = "https://api.whatsapp.com/send?phone=".concat(
                  n,
                  "&text=Hello"
                ));
              break;
            case 6:
              (e.key = "wx"),
                (e.name = i18n.service_wx),
                (e.title = i18n.service_wx),
                (e.url = "");
              break;
            case 7:
              (e.key = "qyszmp"),
                (e.name = i18n.service_szmp),
                (e.title = i18n.service_szmp),
                (e.url = "");
              break;
            case 8:
              (e.key = "yj"),
                (e.name = i18n.service_yx),
                (e.title = i18n.service_yx),
                (e.url = "mailto:".concat(n));
              break;
            case 9:
              (e.key = "tel"),
                (e.name = "电话"),
                (e.title = "电话"),
                (e.url = "tel:".concat(n));
              break;
            case 10:
              (e.key = "link"),
                (e.name = "链接"),
                (e.title = "链接"),
                (e.url = "".concat(a));
              break;
            case 11:
              (e.key = "custom"),
                (e.name = "自定义"),
                (e.title = "自定义"),
                (e.url = "".concat(a));
              break;
            case 12:
              (e.key = "smService"),
                (e.name = "智慧客服"),
                (e.title = "智慧客服"),
                (e.url = "".concat(a));
          }
          return e;
        },
        getIcon = function (c) {
          var n = 1 == obj.data.tplId ? "solid" : "hollow";
          return !isMo() && "number" == typeof c
            ? serviceIcon[n][getKey(c).key]
            : serviceIcon.hollow[c] || "";
        },
        creatPop = function (c, n) {
          0 < $(".service_pop").length
            ? $(".service_pop img").attr("src", $.handleDataImg(c))
            : ((n =
                '<div class="service_pop">\n                                <p>'
                  .concat(
                    i18n.service_sys,
                    '</p>\n                                <img src="'
                  )
                  .concat($.handleDataImg(c), '" alt="')
                  .concat(n, '">\n                            </div>')),
              $("body").append(n)),
            $(document).on("click", function (c) {
              $(".service_pop").is(c.target) ||
                0 !== $(".service_pop").has(c.target).length ||
                $(".doThirdFunc").is(c.target) ||
                0 !== $(".doThirdFunc").has(c.target).length ||
                $(".service_pop").remove();
            });
        },
        creatHtml1 = function (c) {
          var n = obj.data.staffGroupVOs,
            a = [];
          return (
            n &&
              n.forEach(function (c) {
                var c = c.staffVOs,
                  s = [];
                c &&
                  c.forEach(function (c) {
                    var n, a, e, t;
                    c.status &&
                      ((n =
                        11 == c.type && c.iconUrl
                          ? c.iconUrl
                          : getIcon(c.type)),
                      6 == c.type || 7 == c.type || (11 == c.type && c.imageUrl)
                        ? s.push(
                            '<p class="service_item doThirdFunc" type="'
                              .concat(c.type, '" account="')
                              .concat(c.account, '" img="')
                              .concat(
                                c.imageUrl,
                                '">\n                                                <span class="iconSpan">'
                              )
                              .concat(
                                n,
                                "</span>\n                                                <span>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                            </p>"
                              )
                          )
                        : 12 == c.type
                        ? s.push(
                            '<p class="service_item" smartService type="'
                              .concat(c.type, '" account="')
                              .concat(c.account, '" img="')
                              .concat(
                                c.imageUrl,
                                '">\n                                                <span class="iconSpan">'
                              )
                              .concat(
                                n,
                                "</span>\n                                                <span>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                            </p>"
                              )
                          )
                        : ((t = e = ""),
                          (a = getKey(c.type, c.account, c.link).url) &&
                            "null" != a &&
                            ((e = '<a class="p_doThirdFunc" href="'
                              .concat(a, '" target="')
                              .concat(c.linkTarget, '">')),
                            (t = "</a>")),
                          s.push(
                            '<p class="service_item">\n                                                '
                              .concat(
                                e,
                                '\n                                                    <span class="iconSpan">'
                              )
                              .concat(
                                n,
                                "</span>\n                                                    <span>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                                "
                              )
                              .concat(
                                t,
                                "\n                                            </p>"
                              )
                          )));
                  }),
                  0 < s.length &&
                    a.push(
                      '<div class="service_group">\n                                '.concat(
                        s.join(""),
                        "\n                            </div>"
                      )
                    );
              }),
            '<div class="pl_service1 clearfix" id='
              .concat(
                c,
                '>\n                    <div class="service_btn">\n                        <div class="sevice_flex_con">\n                        <div class="btn_con">\n                            <p>'
              )
              .concat(
                getIcon("kf"),
                '</p>\n                        </div>\n                        </div>\n                    </div>\n                    <div class="service_con">\n                        <div class="service_group">\n                            <p class="service_item">\n                                <span class="iconSpan">'
              )
              .concat(
                getIcon("kf"),
                "</span>\n                                <span>"
              )
              .concat(
                i18n.service_zxkf,
                ':</span>\n                                <span><a href="tel:'
              )
              .concat(obj.data.telephone, '">')
              .concat(
                obj.data.telephone,
                '</a></span>\n                            </p>\n                            <p class="service_item">\n                                <span class="iconSpan">'
              )
              .concat(
                getIcon("kf"),
                "</span>\n                                <span>"
              )
              .concat(
                i18n.service_fwsj,
                ":</span>\n                                <span>"
              )
              .concat(obj.data.serviceTimeStart, " - ")
              .concat(
                obj.data.serviceTimeEnd,
                "</span>\n                            </p>\n                        </div>\n                        "
              )
              .concat(
                a.join(""),
                "\n                    </div>\n                </div>\n                "
              )
          );
        },
        creatHtml2 = function (c) {
          var n = obj.data.staffGroupVOs,
            a = [];
          return (
            n &&
              n.forEach(function (c) {
                var c = c.staffVOs,
                  i = [];
                c &&
                  c.forEach(function (c) {
                    var n, a, e, t, s;
                    c.status &&
                      ((n = ""),
                      (a =
                        11 == c.type && c.iconUrl
                          ? c.iconUrl
                          : getIcon(c.type)),
                      (s = t = ""),
                      (e = getKey(c.type, c.account, c.link).url) &&
                        "null" != e &&
                        ((t = '<a class="p_doThirdFunc" href="'
                          .concat(e, '" target="')
                          .concat(c.linkTarget, '" >')),
                        (s = "</a>")),
                      6 == c.type || 7 == c.type || (11 == c.type && c.imageUrl)
                        ? ((n =
                            '<div class="service_img">\n                                            <img src="'
                              .concat($.handleDataImg(c.imageUrl), '" alt="')
                              .concat(
                                c.name,
                                '">\n                                        </div>'
                              )),
                          i.push(
                            '<div class="service_item">\n                                            <p class="service_icon">'
                              .concat(
                                a,
                                '</p>\n                                            <div class="service_value_con">\n                                                <div class="service_value dh">\n                                                    <p class="p_doThirdFunc" type="'
                              )
                              .concat(c.type, '" account="')
                              .concat(c.account, '" img="')
                              .concat(
                                c.imageUrl,
                                '">\n                                                        '
                              )
                              .concat(
                                t,
                                '\n                                                        <span class="iconSpan">'
                              )
                              .concat(
                                a,
                                "</span>\n                                                        <span>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                                        "
                              )
                              .concat(
                                s,
                                "\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            "
                              )
                              .concat(
                                n,
                                "\n                                        </div>"
                              )
                          ))
                        : 12 == c.type
                        ? i.push(
                            '<div class="service_item">\n                                            <p class="service_icon">'
                              .concat(
                                a,
                                '</p>\n                                            <div class="service_value_con">\n                                                <div class="service_value dh">\n                                                    <p class="p_doThirdFunc" type="'
                              )
                              .concat(c.type, '" account="')
                              .concat(c.account, '" img="')
                              .concat(
                                c.imageUrl,
                                '">\n                                                        <span class="iconSpan">'
                              )
                              .concat(
                                a,
                                "</span>\n                                                        <span smartService>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </div>"
                              )
                          )
                        : i.push(
                            '<div class="service_item">\n                                            <p class="service_icon">'
                              .concat(
                                a,
                                '</p>\n                                            <div class="service_value_con">\n                                                <div class="service_value dh">\n                                                    '
                              )
                              .concat(
                                t,
                                '\n                                                        <span class="iconSpan">'
                              )
                              .concat(
                                a,
                                "</span>\n                                                        <span>"
                              )
                              .concat(
                                c.account,
                                "</span>\n                                                    "
                              )
                              .concat(
                                s,
                                "\n                                                </div>\n                                            </div>\n                                        </div>"
                              )
                          ));
                  }),
                  0 < i.length &&
                    a.push(
                      '<div class="service_group">\n                                '.concat(
                        i.join(""),
                        "\n                            </div>"
                      )
                    );
              }),
            '<div class="pl_service2" id='
              .concat(
                c,
                '>\n                    <div class="service_item">\n                        <p class="service_icon">'
              )
              .concat(
                getIcon("kf"),
                '</p>\n                        <div class="service_value_con">\n                        <div class="service_value">\n                            <p><span>'
              )
              .concat(i18n.service_kfrx, ':</span><span><a href="tel:')
              .concat(obj.data.telephone, '">')
              .concat(
                obj.data.telephone,
                "</a></span></p>\n                            <p><span>"
              )
              .concat(i18n.service_fwsj, ":</span><span>")
              .concat(obj.data.serviceTimeStart, " - ")
              .concat(
                obj.data.serviceTimeEnd,
                "</span></p>\n                        </div>\n                        </div>\n                    </div>\n                    "
              )
              .concat(a.join(""), "\n                </div>\n                ")
          );
        },
        creatHtml3 = function (c) {
          var n = obj.data.staffGroupVOs,
            a = [];
          return (
            n &&
              n.forEach(function (c) {
                var c = c.staffVOs,
                  t = [];
                c &&
                  c.forEach(function (c) {
                    var n, a, e;
                    c.status &&
                      ((e = a = ""),
                      (n = getKey(c.type, c.account, c.link).url) &&
                        "null" != n &&
                        ((a = '<a class="p_doThirdFunc" href="'
                          .concat(n, '" target="')
                          .concat(c.linkTarget, '">')),
                        (e = "</a>")),
                      (a = ""
                        .concat(
                          a,
                          "\n                                                        "
                        )
                        .concat(
                          c.name,
                          "\n                                                    "
                        )
                        .concat(e)),
                      (6 == c.type ||
                        7 == c.type ||
                        (11 == c.type && c.imageUrl)) &&
                        (a = '<p class="doThirdFunc" type="'
                          .concat(c.type, '" account="')
                          .concat(c.account, '" img="')
                          .concat(
                            c.imageUrl,
                            '">\n                                                         <span>'
                          )
                          .concat(
                            c.name,
                            "</span>\n                                                     </p>"
                          )),
                      (e =
                        11 == c.type && c.iconUrl
                          ? c.iconUrl
                          : getIcon(c.type)),
                      t.push(
                        '<div class="item_con">\n                                        <div class="service_item '
                          .concat(
                            getKey(c.type).key,
                            '">\n                                            <p class="service_icon">'
                          )
                          .concat(
                            e,
                            '</p>\n                                            <div class="service_value dh" '
                          )
                          .concat(12 == c.type ? "smartService" : "", ">")
                          .concat(
                            a,
                            "</div>\n                                        </div>\n                                    </div>"
                          )
                      ));
                  }),
                  0 < t.length &&
                    a.push(
                      '<div class="service_group">\n                                '.concat(
                        t.join(""),
                        "\n                            </div>"
                      )
                    );
              }),
            '<div class="pl_service3" id='
              .concat(
                c,
                '>\n                    <div class="item_con">\n                        <div class="service_item kf">\n                            <p class="service_icon">'
              )
              .concat(
                getIcon("kf"),
                '</p>\n                            <div class="service_value">\n                                <p><span>'
              )
              .concat(i18n.service_rx, ':</span><span><a href="tel:')
              .concat(obj.data.telephone, '">')
              .concat(
                obj.data.telephone,
                "</a></span></p>\n                                <p><span>"
              )
              .concat(i18n.service_sj, ":</span><span>")
              .concat(obj.data.serviceTimeStart, " - ")
              .concat(
                obj.data.serviceTimeEnd,
                "</span></p>\n                            </div>\n                        </div>\n                    </div>\n                    "
              )
              .concat(a.join(""), "\n                </div>\n                ")
          );
        },
        creatHtml4 = function (c) {
          var n = obj.data.staffGroupVOs,
            a = [];
          return (
            n &&
              n.forEach(function (c) {
                var c = c.staffVOs,
                  t = [];
                c &&
                  c.forEach(function (c) {
                    var n, a, e;
                    c.status &&
                      ((e = a = ""),
                      (n = getKey(c.type, c.account, c.link).url) &&
                        "null" != n &&
                        ((a = '<a class="p_doThirdFunc" href="'
                          .concat(n, '" target="')
                          .concat(c.linkTarget, '">')),
                        (e = "</a>")),
                      (a = '<div class="service_value dh" '
                        .concat(
                          12 == c.type ? "smartService" : "",
                          ">\n                                                    "
                        )
                        .concat(
                          a,
                          "\n                                                        <span>"
                        )
                        .concat(
                          c.account,
                          "</span>\n                                                    "
                        )
                        .concat(
                          e,
                          "\n                                                </div>"
                        )),
                      (e = "showLang"),
                      (6 == c.type ||
                        7 == c.type ||
                        (11 == c.type && c.imageUrl)) &&
                        ((a =
                          '<div class="service_value tp">\n                                                    <img src="'
                            .concat($.handleDataImg(c.imageUrl), '" alt="')
                            .concat(
                              c.name,
                              '">\n                                                </div>'
                            )),
                        (e = "showImg")),
                      (c =
                        11 == c.type && c.iconUrl
                          ? c.iconUrl
                          : getIcon(c.type)),
                      t.push(
                        '<div class="item_con clearfix">\n                                        <div class="service_item '
                          .concat(
                            e,
                            '">\n                                            <p class="service_icon">\n                                                '
                          )
                          .concat(
                            c,
                            "\n                                            </p>\n                                            "
                          )
                          .concat(
                            a,
                            "\n                                        </div>\n                                    </div>"
                          )
                      ));
                  }),
                  0 < t.length &&
                    a.push(
                      '<div class="service_group">\n                                \x3c!-- 客服组 预留插槽 --\x3e\n                                '.concat(
                        t.join(""),
                        "\n                            </div>"
                      )
                    );
              }),
            '<div class="pl_service4" id='
              .concat(
                c,
                '>\n                    <div class="item_con clearfix">\n                        <div class="service_item showLang">\n                            <p class="service_icon">\n                                '
              )
              .concat(
                getIcon("kf"),
                '\n                            </p>\n                            <div class="service_value">\n                                <p><span>'
              )
              .concat(i18n.service_rx, ':</span><span><a href="tel:')
              .concat(obj.data.telephone, '">')
              .concat(
                obj.data.telephone,
                "</a></span></p>\n                                <p><span>"
              )
              .concat(i18n.service_sj, ":</span><span>")
              .concat(obj.data.serviceTimeStart, " - ")
              .concat(
                obj.data.serviceTimeEnd,
                "</span></p>\n                            </div>\n                        </div>\n                    </div>\n                    "
              )
              .concat(a.join(""), "\n                </div>\n                ")
          );
        },
        creatHtmlMo = function () {
          var c = obj.data.staffGroupVOs,
            n = [];
          return (
            c &&
              0 < c.length &&
              (n = c.map(function (c) {
                var n = [];
                c.staffVOs &&
                  0 < c.staffVOs.length &&
                  (n = c.staffVOs.map(function (c) {
                    var n = getKey(c.type, c.account, c.link).url,
                      a = "",
                      e = "";
                    n &&
                      "null" != n &&
                      ((a = '<a class="p_doThirdFunc" href="'
                        .concat(n, '" target="')
                        .concat(c.linkTarget, '">')),
                      (e = "</a>"));
                    a = " "
                      .concat(a)
                      .concat(8 === c.type ? c.account : c.name, " ")
                      .concat(e);
                    (6 == c.type ||
                      7 == c.type ||
                      (11 == c.type && c.imageUrl)) &&
                      (a = '<p class="doThirdFunc" type="'
                        .concat(c.type, '" account="')
                        .concat(c.account, '" img="')
                        .concat(
                          c.imageUrl,
                          '">\n                                                    '
                        )
                        .concat(
                          8 === c.type ? c.account : c.name,
                          "\n                                                </p>"
                        ));
                    e =
                      11 == c.type && c.iconUrl
                        ? c.iconUrl
                        : getIcon(getKey(c.type).key);
                    return '<div class="service_item">\n                                            <div class="service_icon"> '
                      .concat(
                        e,
                        ' </div>\n                                            <div class="service_value" '
                      )
                      .concat(12 == c.type ? "smartService" : "", ">")
                      .concat(
                        a,
                        "</div>\n                                        </div>"
                      );
                  }));
                c = "";
                return (
                  0 < n.length &&
                    (c =
                      '<div class="service_group">  \n                                 \x3c!-- 客服组 预留插槽 --\x3e\n                                  '.concat(
                        n.join(""),
                        "\n                                </div>"
                      )),
                  c
                );
              })),
            '<div class="pl_service">\n                            <div class="p_defaultIocn"> '
              .concat(
                getIcon("ccontact"),
                '</div>\n                            <div class="pl_content_box">\n                                \n                                \n                                <div class="body_service">\n                                <div class="footer_service">\n                                    <p>\n                                        <span class="p_kefuicon">'
              )
              .concat(
                getIcon("kf"),
                '</span>\n                                        <span class="bottom_type">'
              )
              .concat(
                i18n.service_rx,
                ' <span> <a style="color:#333" href="tel:'
              )
              .concat(obj.data.telephone, '">')
              .concat(
                obj.data.telephone,
                '</a> </span>|<span class="bottom_type">'
              )
              .concat(i18n.service_sj, '<span style="color:#333">')
              .concat(obj.data.serviceTimeStart, " - ")
              .concat(
                obj.data.serviceTimeEnd,
                "</span> </span> </span>\n                                          </p>\n                                   \n                                </div>\n                                "
              )
              .concat(
                n.join(""),
                ' \n                                </div>\n                            </div>\n                        </div> \n                        <div class="custom-service-background"></div>\n                        '
              )
          );
        },
        renderDom = function renderDom(id) {
          var model = [1, 2, 3, 4],
            createFnName;
          isMo()
            ? obj.data.tplId &&
              -1 < model.indexOf(Number(obj.data.tplId)) &&
              ($("body").append(creatHtmlMo(id)),
              $(".p_defaultIocn").on("click", function (c) {
                $(".custom-service-background").toggle(),
                  $(".pl_content_box").toggleClass("show");
              }),
              $(".custom-service-background").on("click", function (c) {
                $(".custom-service-background").hide(),
                  $(".pl_content_box").removeClass("show");
              }))
            : obj.data.tplId &&
              -1 < model.indexOf(Number(obj.data.tplId)) &&
              ((createFnName = eval("creatHtml".concat(obj.data.tplId))),
              $("body").append(createFnName(id))),
            $(".doThirdFunc").click(function () {
              var c = this,
                n = Number($(this).attr("type")),
                a = $(this).attr("img"),
                e = $(this).attr("account");
              !isMo() || (6 != n && 7 != n && 11 != n)
                ? creatPop(a, e)
                : $(this).find(".chat-wraper").hasClass("show")
                ? ($(this).find(".chat-wraper").slideUp(500),
                  $(this).find(".chat-wraper").removeClass("show"))
                : (0 == $(this).find(".chat-wraper").length &&
                    ((a = $.handleDataImg(a)),
                    $(this).append(
                      '<div class="chat-wraper" style="display:none"><div >'
                        .concat(
                          i18n.service_sys,
                          '</div><p><img style="width:100px" src="'
                        )
                        .concat(a, '" alt="')
                        .concat(i18n.service_sys, '" /></p></div>')
                    )),
                  setTimeout(function () {
                    $(c).find(".chat-wraper").slideDown();
                  }, 100),
                  $(this).find(".chat-wraper").addClass("show"));
            });
        };
      renderDom("service" + +new Date());
    },
  });
});
