"use strict";$define(["pl_util","pl_readyload","cmsAjax"],function(e,o,a){return{init:function(e,r,n){var t,s=n.page,f=Number(s.from),p=Math.ceil(Number(s.totalCount)/Number(s.size)),d=n.cid,l=n.id,_=n.sParams;0<r.find(".js_filter_pagination").length?$require(["cmsAjax"],function(a){var e=r.find(".js_filter_pagination a"),i=_.size;function t(){var e={};e.view=n.view,e.compId=d,e.params=JSON.stringify(_);a.cmsAjax.postJson(window.location.origin+"/api/get_comp",e,{dataType:"html"}).then(function(e){var a,n="";$(e).each(function(e,a){$(a).hasClass(l)?n=a:0<$(a).find("."+l).length&&(n=$(a).find("."+l))}),0<$(n).find(".p_nodata").length?(a=$(n).find(".p_nodata"),$("#"+d).find("."+l).find(".p_nodata").remove(),$("#"+d).find("."+l).find(".p_list").remove(),0==$("#"+d).find("."+l).find(".p_filter_wrapper").length?$("#"+d).find("."+l).find(".p_page").before(a):$("#"+d).find("."+l).find(".p_filter_wrapper").after(a)):(a=$(n).find(".p_list"),$("#"+d).find("."+l).find(".p_nodata").remove(),$("#"+d).find("."+l).find(".p_list").remove(),0==$("#"+d).find("."+l).find(".p_filter_wrapper").length||$("#"+d).find("."+l).find(".p_filter_wrapper").hasClass("before")?$("#"+d).find("."+l).find(".p_page").before(a):$("#"+d).find("."+l).find(".p_filter_wrapper").after(a),a=$(n).find(".page_con"),$("#"+d).find("."+l).find(".p_page").empty().html(a),$("#"+d).find("."+l).find(".p_page a").attr("href","javascript:;")),o.lazyImg()})}e.removeClass("current"),e.eq(1).addClass("current"),r.find(".page_prev").addClass("disabled"),function(){$("#"+d).off("click").on("click",".page_a",function(){var n,e,a;$(this).hasClass("disabled")||$(this).hasClass("current")||$(this).hasClass("page_ellipsis")||(n=parseInt(r.find(".js_filter_pagination .page_num.current").text())-1,parseInt($(this).text())-1!=n&&((e=r.find(".js_filter_pagination .page_num")).removeClass("current"),$(this).hasClass("page_prev")?$(e).each(function(e,a){parseInt($(a).text())-1==n-1&&$(a).addClass("current")}):$(this).hasClass("page_next")?$(e).each(function(e,a){parseInt($(a).text())-1==1+n&&$(a).addClass("current")}):$(this).addClass("current"),1+(a=parseInt(r.find(".js_filter_pagination .page_num.current").text())-1)==e.length?r.find(".page_next").addClass("disabled"):r.find(".page_next").removeClass("disabled"),0==a?r.find(".page_prev").addClass("disabled"):r.find(".page_prev").removeClass("disabled"),0!=r.find(".js_filter_pagination .current").length&&(a=0,a=$(this).hasClass("page_prev")||$(this).hasClass("page_next")?parseInt(r.find(".js_filter_pagination .current").text())-1:parseInt($(this).text())-1,_.from=a*i,$(this).parents(".js_filter_pagination").attr("data-total"),t())))})}(),function(){r.find(".p_page").off("click").on("click","a",function(e){$(this).hasClass("disabled")&&e.preventDefault()}),$(".js_filter_pagination").on("keyup",".page_input",function(e){var a=$(this),n=a.val();/[^\d]/.test(n)&&(i=n.replace(/[^\d]/g,""),a.val(i)),n&&n<1&&a.val(1);var i=parseInt($("#"+d).find("."+l).find(".page_num").last().text());n&&i<n&&a.val(i),"13"==e.keyCode&&(e=parseInt(r.find(".js_filter_pagination .current").text()),a.val()&&a.val()!=parseInt(e)&&(a=parseInt(a.val())-1,_.from=_.size*a,r.find(".js_filter_pagination .page_num").removeClass("current"),r.find(".js_filter_pagination .page_num").eq(a).addClass("current"),t()))}),r.find(".js_filter_pagination").on("click",".page_confirmJump",function(){var e=r.find(".page_input"),a=parseInt(r.find(".js_filter_pagination .current").text());e.val()&&e.val()!=parseInt(a)&&(e=parseInt(e.val())-1,_.from=_.size*e,r.find(".js_filter_pagination .page_num").removeClass("current"),r.find(".js_filter_pagination .page_num").eq(e).addClass("current"),t())})}()}):(r.find(".p_page").removeClass("js_filter_pagination"),r.find(".p_page a").each(function(e,a){$(a).hasClass("disabled")&&$(a).attr("href","javascript:;")}),r.find(".p_page").on("click","a",function(e){$(this).hasClass("disabled")&&e.preventDefault()}),(t=r.find(".page_input")).on("keyup",function(e){var a,n=t.val();if(/[^\d]/.test(n)&&(a=n.replace(/[^\d]/g,""),t.val(a)),n&&n<1&&t.val(1),n&&p<n&&t.val(p),"13"==e.keyCode){e=r.find(".page_a.current").text();if(t.val()&&t.val()!=parseInt(e)){if(f=parseInt(t.val())-1,0==r.find(".page_next.disabled").length)var i=r.find(".page_next").attr("href");else{if(0!=r.find(".page_prev.disabled").length)return;i=r.find(".page_prev").attr("href")}i.substr(i.lastIndexOf("/"),i.lastIndexOf("."));i=i.substr(0,i.indexOf("-"))+"-"+f*s.size+"-"+s.size+".html";$.openHref(i)}}}),r.find(".page_confirmJump").on("click",function(){var e=r.find(".page_input"),a=r.find(".page_a.current").text();if(e.val()&&e.val()!=parseInt(a)){if(f=parseInt(e.val())-1,0==r.find(".page_next.disabled").length)var n=r.find(".page_next").attr("href");else{if(0!=r.find(".page_prev.disabled").length)return;n=r.find(".page_prev").attr("href")}n.substr(n.lastIndexOf("/"),n.lastIndexOf("."));n=n.substr(0,n.indexOf("-"))+"-"+f*s.size+"-"+s.size+".html";$.openHref(n)}}))}}});